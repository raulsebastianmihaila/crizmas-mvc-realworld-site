(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{27:function(e,t,a){var n;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var a={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)&&n.length){var s=r.apply(null,n);s&&e.push(s)}else if("object"===i)for(var l in n)a.call(n,l)&&n[l]&&e.push(l)}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()},28:function(e,t,a){"use strict";a.d(t,"f",(function(){return l})),a.d(t,"h",(function(){return c})),a.d(t,"i",(function(){return o})),a.d(t,"g",(function(){return m})),a.d(t,"e",(function(){return u})),a.d(t,"c",(function(){return d})),a.d(t,"k",(function(){return f})),a.d(t,"m",(function(){return p})),a.d(t,"l",(function(){return g})),a.d(t,"d",(function(){return h})),a.d(t,"a",(function(){return b})),a.d(t,"j",(function(){return v})),a.d(t,"b",(function(){return E}));var n=a(3),r=a(4);const i=e=>{e.createdAt=new Date(e.createdAt),e.updatedAt=new Date(e.updatedAt)},s=e=>(e.articles.forEach(i),e),l=({offset:e,limit:t})=>Object(n.b)("articles",{offset:e,limit:t}).then(r.b).then(s),c=({offset:e,limit:t})=>Object(n.b)("articles/feed",{offset:e,limit:t}).then(r.b).then(s),o=({tag:e,offset:t,limit:a})=>Object(n.b)("articles",{tag:e,offset:t,limit:a}).then(r.b).then(s),m=({author:e,limit:t,offset:a})=>Object(n.b)("articles",{author:e,offset:a,limit:t}).then(r.b).then(s),u=({favorited:e,limit:t,offset:a})=>Object(n.b)("articles",{favorited:e,offset:a,limit:t}).then(r.b).then(s),d=({slug:e})=>Object(n.b)(`articles/${encodeURIComponent(e)}`).then(r.b).then(({article:e})=>(i(e),{article:e})),f=({title:e,description:t,body:a,tagList:i})=>Object(n.c)("articles",{article:{title:e,description:t,body:a,tagList:i}}).then(r.b,r.a),p=({slug:e,title:t,description:a,body:i,tagList:s})=>Object(n.d)(`articles/${encodeURIComponent(e)}`,{article:{title:t,description:a,body:i,tagList:s}}).then(r.b,r.a),g=({slug:e,isFavorite:t})=>{return(t?n.c:n.a)(`articles/${e}/favorite`).then(r.b)},h=({slug:e})=>Object(n.b)(`articles/${encodeURIComponent(e)}/comments`).then(r.b).then(({comments:e})=>(e.forEach(i),{comments:e})),b=({slug:e})=>Object(n.a)(`articles/${encodeURIComponent(e)}`),v=({slug:e,comment:t})=>Object(n.c)(`articles/${encodeURIComponent(e)}/comments`,{comment:{body:t}}).then(r.b).then(({comment:e})=>(i(e),{comment:e})),E=({slug:e,commentId:t})=>Object(n.a)(`articles/${encodeURIComponent(e)}/comments/${t}`)},29:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(1);function r(e){const t={title:e.title,author:new n.a(e.author),description:e.description,body:e.body,slug:e.slug,createdAt:e.createdAt,updatedAt:e.updatedAt,favorited:e.favorited,favoritesCount:e.favoritesCount,tagList:e.tagList,comments:null,setFavorite:({favorited:e,favoritesCount:a})=>{t.favorited=e,t.favoritesCount=a},setComments:e=>{t.comments=e},addComment:e=>{t.comments.unshift(e)},deleteComment:e=>{const a=t.comments.findIndex(t=>t.id===e);-1!==a&&t.comments.splice(a,1)}};return t}},30:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));const n=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}),r=e=>n.format(e)},31:function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(8),s=a.n(i),l=a(2),c=a(30);const o=({article:e})=>r.a.createElement("span",null,r.a.createElement(l.Link,{to:`/@${encodeURIComponent(e.author.username)}`},r.a.createElement("img",{src:e.author.image}),"Â "),r.a.createElement("div",{className:"info"},r.a.createElement(l.Link,{to:`/@${encodeURIComponent(e.author.username)}`,className:"author"},e.author.username),r.a.createElement("span",{className:"date"},Object(c.a)(e.createdAt))));o.propTypes={article:s.a.object.isRequired},t.a=o},32:function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(8);const s=({article:e})=>!!e.tagList.length&&r.a.createElement("ul",{className:"tag-list"},e.tagList.map((e,t)=>r.a.createElement("li",{key:t,className:"tag-default tag-pill tag-outline"},e)));s.propTypes={article:a.n(i).a.object.isRequired},t.a=s},33:function(e,t,a){"use strict";var n=a(5),r=a.n(n),i=a(1),s=a(28),l=a(9);t.a=r.a.controller({setFavorite:e=>i.b.isAuthenticated?s.l({slug:e.slug,isFavorite:!e.favorited}).then(t=>{e.setFavorite(t.article)}):(l.a.transitionTo("/register"),Promise.reject(new Error("The user is not authenticated")))})},36:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(0),r=a.n(n),i=a(8),s=a.n(i),l=a(2),c=a(27),o=a.n(c),m=a(31),u=a(32);class d extends n.Component{constructor(){super(),this.state={isFavoritePending:!1},this.setFavorite=()=>{this.setState({isFavoritePending:!0}),this.props.articleController.setFavorite(this.props.article).then(()=>{this.setState({isFavoritePending:!1})})}}render(){const{article:e}=this.props;return r.a.createElement("div",{className:"article-preview"},r.a.createElement("div",{className:"article-meta"},r.a.createElement(m.a,{article:e}),r.a.createElement("button",{className:o()("btn btn-sm pull-xs-right",{"btn-primary":e.favorited,"btn-outline-primary":!e.favorited}),onClick:this.setFavorite,disabled:this.state.isFavoritePending},r.a.createElement("i",{className:"ion-heart"})," ",e.favoritesCount)),r.a.createElement(l.Link,{to:`/article/${e.slug}`,className:"preview-link"},r.a.createElement("h1",null,e.title),r.a.createElement("p",null,e.description),r.a.createElement("span",null,"Read more..."),r.a.createElement(u.a,{article:e})))}}d.propTypes={article:s.a.object.isRequired,articleController:s.a.object.isRequired}},37:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(0),r=a.n(n),i=a(8),s=a.n(i),l=a(27),c=a.n(l);class o extends n.Component{onPageClick(e,t){t.preventDefault(),this.props.onChange({offset:e*this.props.itemsPerPage})}render(){const{totalItemsCount:e,offset:t,itemsPerPage:a}=this.props,n=Math.ceil(e/a);if(n<=1)return!1;const i=Math.trunc(t/a);return r.a.createElement("nav",null,r.a.createElement("ul",{className:"pagination"},Array.from({length:n},(e,t)=>r.a.createElement("li",{key:t,className:c()("page-item",{active:t===i})},r.a.createElement("a",{href:"",className:"page-link",onClick:this.onPageClick.bind(this,t)},t+1)))))}}o.propTypes={totalItemsCount:s.a.number.isRequired,offset:s.a.number.isRequired,itemsPerPage:s.a.number.isRequired,onChange:s.a.func.isRequired}},57:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return u}));var n=a(0),r=a.n(n),i=a(8),s=a.n(i),l=a(27),c=a.n(l),o=a(36),m=a(37);class u extends n.Component{constructor(){super(),this.selectTab=(e,t)=>{t.preventDefault(),this.props.controller.selectTab(e)},this.onTagClick=(e,t)=>{t.preventDefault(),this.props.controller.selectTag(e)}}render(){const{currentUser:e,selectedTab:t,tabs:a,articles:n,pending:i,tags:s,selectedTag:l,articleController:u,articlesOffset:d,articlesLimit:f,totalArticlesCount:p,getPageArticles:g}=this.props.controller;return r.a.createElement("div",{className:"home-page"},r.a.createElement("div",{className:"banner"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"logo-font"},"conduit"),r.a.createElement("p",null,"A place to share your knowledge."))),r.a.createElement("div",{className:"container page"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-9"},r.a.createElement("div",{className:"feed-toggle"},r.a.createElement("ul",{className:"nav nav-pills outline-active"},e.isAuthenticated&&r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:c()("nav-link",{active:t===a.own}),href:"",onClick:this.selectTab.bind(this,a.own)},"Your Feed")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:c()("nav-link",{active:t===a.global}),href:"",onClick:this.selectTab.bind(this,a.global)},"Global Feed")),t===a.tag&&r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link active"},r.a.createElement("i",{className:"ion-pound"})," ",l)))),n&&(n.length?n.map((e,t)=>r.a.createElement(o.a,{key:t,article:e,articleController:u})):r.a.createElement("div",{className:"article-preview"},"No articles are here... yet.")),i.has("getArticles")&&r.a.createElement("div",{className:"article-preview"},"Loading articles..."),r.a.createElement(m.a,{totalItemsCount:p,offset:d,itemsPerPage:f,onChange:g})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"sidebar"},r.a.createElement("p",null,"Popular Tags"),i.has("getTags")&&r.a.createElement("p",null,"Loading tags..."),!i.has("getTags")&&(s.length?r.a.createElement("div",{className:"tag-list"},s.map((e,t)=>r.a.createElement("a",{key:t,href:"",className:"tag-pill tag-default",onClick:this.onTagClick.bind(this,e)},e))):r.a.createElement("p",null,"No tags yet.")))))))}}u.propTypes={controller:s.a.object.isRequired}},72:function(e,t,a){"use strict";a.r(t);var n=a(5),r=a.n(n),i=a(28),s=a(3),l=a(4);var c=a(1),o=a(29),m=a(33);const u={own:Symbol(),global:Symbol(),tag:Symbol()};t.default=r.a.controller((function(){const e={articlesOffset:0,articlesLimit:10,totalArticlesCount:0,tabs:u,selectedTab:c.b.isAuthenticated?u.own:u.global,currentUser:c.b,articles:null,tags:null,selectedTag:null,articleController:m.a,onEnter:()=>{e.getArticles(),e.getTags()},getArticles:()=>{return(e.selectedTab===u.own?t:e.selectedTab===u.global?a:n)().then(({articles:t,articlesCount:a})=>{e.articles=t.map(e=>new o.a(e)),e.totalArticlesCount=a})}},t=()=>i.h({offset:e.articlesOffset,limit:e.articlesLimit}),a=()=>i.f({offset:e.articlesOffset,limit:e.articlesLimit}),n=()=>i.i({offset:e.articlesOffset,limit:e.articlesLimit,tag:e.selectedTag});return e.getTags=()=>(()=>Object(s.b)("tags").then(l.b))().then(({tags:t})=>{e.tags=t}),e.selectTab=t=>{e.articles=null,e.selectedTab=t,e.articlesOffset=0,e.totalArticlesCount=0,e.getArticles()},e.selectTag=t=>{e.selectedTag=t,e.selectTab(u.tag)},e.getPageArticles=({offset:t})=>{e.articlesOffset=t,e.getArticles()},e}))}}]);
//# sourceMappingURL=home.bundle-4a2eb1e367b178f6053f.js.map