(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{28:function(t,e,n){"use strict";n.d(e,"f",(function(){return s})),n.d(e,"h",(function(){return l})),n.d(e,"i",(function(){return c})),n.d(e,"g",(function(){return m})),n.d(e,"e",(function(){return u})),n.d(e,"c",(function(){return d})),n.d(e,"k",(function(){return f})),n.d(e,"m",(function(){return g})),n.d(e,"l",(function(){return p})),n.d(e,"d",(function(){return b})),n.d(e,"a",(function(){return h})),n.d(e,"j",(function(){return v})),n.d(e,"b",(function(){return y}));var r=n(3),i=n(4);const a=t=>{t.createdAt=new Date(t.createdAt),t.updatedAt=new Date(t.updatedAt)},o=t=>(t.articles.forEach(a),t),s=({offset:t,limit:e})=>Object(r.b)("articles",{offset:t,limit:e}).then(i.b).then(o),l=({offset:t,limit:e})=>Object(r.b)("articles/feed",{offset:t,limit:e}).then(i.b).then(o),c=({tag:t,offset:e,limit:n})=>Object(r.b)("articles",{tag:t,offset:e,limit:n}).then(i.b).then(o),m=({author:t,limit:e,offset:n})=>Object(r.b)("articles",{author:t,offset:n,limit:e}).then(i.b).then(o),u=({favorited:t,limit:e,offset:n})=>Object(r.b)("articles",{favorited:t,offset:n,limit:e}).then(i.b).then(o),d=({slug:t})=>Object(r.b)(`articles/${encodeURIComponent(t)}`).then(i.b).then(({article:t})=>(a(t),{article:t})),f=({title:t,description:e,body:n,tagList:a})=>Object(r.c)("articles",{article:{title:t,description:e,body:n,tagList:a}}).then(i.b,i.a),g=({slug:t,title:e,description:n,body:a,tagList:o})=>Object(r.d)(`articles/${encodeURIComponent(t)}`,{article:{title:e,description:n,body:a,tagList:o}}).then(i.b,i.a),p=({slug:t,isFavorite:e})=>{return(e?r.c:r.a)(`articles/${t}/favorite`).then(i.b)},b=({slug:t})=>Object(r.b)(`articles/${encodeURIComponent(t)}/comments`).then(i.b).then(({comments:t})=>(t.forEach(a),{comments:t})),h=({slug:t})=>Object(r.a)(`articles/${encodeURIComponent(t)}`),v=({slug:t,comment:e})=>Object(r.c)(`articles/${encodeURIComponent(t)}/comments`,{comment:{body:e}}).then(i.b).then(({comment:t})=>(a(t),{comment:t})),y=({slug:t,commentId:e})=>Object(r.a)(`articles/${encodeURIComponent(t)}/comments/${e}`)},29:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(1);function i(t){const e={title:t.title,author:new r.a(t.author),description:t.description,body:t.body,slug:t.slug,createdAt:t.createdAt,updatedAt:t.updatedAt,favorited:t.favorited,favoritesCount:t.favoritesCount,tagList:t.tagList,comments:null,setFavorite:({favorited:t,favoritesCount:n})=>{e.favorited=t,e.favoritesCount=n},setComments:t=>{e.comments=t},addComment:t=>{e.comments.unshift(t)},deleteComment:t=>{const n=e.comments.findIndex(e=>e.id===t);-1!==n&&e.comments.splice(n,1)}};return e}},68:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return c}));var r=n(0),i=n.n(r),a=n(8),o=n.n(a),s=n(34);function l(){return(l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}class c extends r.Component{constructor(){super(),this.onSubmit=t=>{t.preventDefault(),this.props.controller.form.submit()},this.onTagStringKeyPress=t=>{"Enter"===t.key&&(t.preventDefault(),this.props.controller.form.get("tagString").submit())}}render(){const{form:t,serverErrors:e,isPending:n,removeTag:r}=this.props.controller,a=t.get("tagList").getValue();return i.a.createElement("div",{className:"editor-page"},i.a.createElement("div",{className:"container page"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-10 offset-md-1 col-xs-12"},e&&i.a.createElement("ul",{className:"error-messages"},e.map((t,e)=>i.a.createElement("li",{key:e},t))),i.a.createElement("form",{onSubmit:this.onSubmit},i.a.createElement("fieldset",null,i.a.createElement("fieldset",{className:"form-group"},i.a.createElement(s.Input,l({type:"text",inputClassName:"form-control form-control-lg",placeholder:"Article Title",disabled:n},t.get("title")))),i.a.createElement("fieldset",{className:"form-group"},i.a.createElement(s.Input,l({type:"text",inputClassName:"form-control",placeholder:"What's this article about?",disabled:n},t.get("description")))),i.a.createElement("fieldset",{className:"form-group"},i.a.createElement(s.Input,l({type:"textarea",inputClassName:"form-control",placeholder:"Write your article (in markdown)",inputProps:{rows:"8"},disabled:n},t.get("body")))),i.a.createElement("fieldset",{className:"form-group"},i.a.createElement(s.Input,l({type:"text",inputClassName:"form-control",placeholder:"Enter tags",disabled:n},t.get("tagString"),{inputProps:{onKeyPress:this.onTagStringKeyPress}})),!!a.length&&i.a.createElement("div",{className:"tag-list"},a.map((t,e)=>i.a.createElement("span",{key:e,className:"tag-default tag-pill"},i.a.createElement("i",{className:"ion-close-round",onClick:r.bind(null,e)}),t)))),i.a.createElement("button",{className:"btn btn-lg pull-xs-right btn-primary",disabled:n},"Publish Article")))))))}}c.propTypes={controller:o.a.object.isRequired}},69:function(t,e,n){"use strict";n.r(e);var r=n(5),i=n.n(r),a=n(10),o=n.n(a),s=n(9),l=n(1),c=n(29),m=n(28);e.default=i.a.controller((function(){const t={isNew:!1,form:null,serverErrors:null,article:null,onEnter:({routeFragment:n})=>l.b.isAuthenticated?(t.isNew=!n.abstractPath,t.isNew?void e():t.getArticle(s.a.params.get("slug")).then(e,()=>(s.a.transitionTo("/"),!1))):(s.a.transitionTo("/login"),!1)},e=()=>{t.form=new o.a({children:[{name:"title",initialValue:t.article&&t.article.title,validate:a.validation.required()},{name:"description",initialValue:t.article&&t.article.description},{name:"body",initialValue:t.article&&t.article.body,validate:a.validation.required()},{name:"tagString",actions:{submit:t.updateTagList}},{name:"tagList",initialValue:t.article&&t.article.tagList||[]}],actions:{submit:()=>{const e=t.form.getResult();t.saveArticle({title:e.title,description:e.description,body:e.body,tagList:e.tagList})}},onFormChange:()=>{t.serverErrors=null}})};return t.getArticle=e=>m.c({slug:e}).then(({article:e})=>{t.article=new c.a(e)}),t.saveArticle=({title:e,description:n,body:r,tagList:i})=>{return t.serverErrors=null,(t.isNew?m.k({title:e,description:n,body:r,tagList:i}):m.m({slug:t.article.slug,title:e,description:n,body:r,tagList:i})).then(({article:{slug:t}})=>{s.a.transitionTo(`/article/${t}`)},e=>{t.serverErrors=e})},t.updateTagList=()=>{const e=t.form.get("tagList"),n=e.getValue(),r=t.form.get("tagString"),i=r.getResult(),a=i&&i.split(",").map(t=>t.trim()).filter(t=>t&&!n.includes(t));r.clear(),a&&a.length&&e.onChange(n.concat(a))},t.removeTag=e=>{t.form.get("tagList").getValue().splice(e,1)},t}))}}]);
//# sourceMappingURL=editor.bundle-4a2eb1e367b178f6053f.js.map