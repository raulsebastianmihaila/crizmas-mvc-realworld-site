(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{54:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return E}));var r=a(0),n=a.n(r),l=a(3),o=a.n(l),s=a(4),c=a(57),m=a(34),i=a(24),u=a.n(i),d=a(29),h=a(30),p=a(33);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}class E extends r.Component{constructor(){super(),this.onDelete=()=>{this.props.controller.deleteArticle()},this.setFollowing=()=>{this.props.controller.setFollowing()},this.setFavorite=()=>{this.props.controller.setFavorite()},this.onSubmit=e=>{e.preventDefault(),this.props.controller.form.submit()}}renderArticleMeta(){const{article:e,currentUser:t,pending:a}=this.props.controller;return n.a.createElement("div",{className:"article-meta"},n.a.createElement(d.a,{article:e}),e.author.username===t.username&&n.a.createElement("span",null,n.a.createElement(s.a,{to:"/editor/"+e.slug,className:"btn btn-sm btn-outline-secondary"},n.a.createElement("i",{className:"ion-edit"}),"  Edit Article")," ",n.a.createElement("button",{className:"btn btn-sm btn-outline-danger",onClick:this.onDelete,disabled:a.has("deleteArticle")},n.a.createElement("i",{className:"ion-trash-a"}),"  Delete Article")),e.author.username!==t.username&&n.a.createElement("span",null,n.a.createElement("button",{className:u()("btn btn-sm",{"btn-secondary":e.author.following,"btn-outline-secondary":!e.author.following}),onClick:this.setFollowing,disabled:a.has("setFollowing")},n.a.createElement("i",{className:"ion-plus-round"})," ",e.author.following?"Unfollow":"Follow"," ",e.author.username)," ",n.a.createElement("button",{className:u()("btn btn-sm",{"btn-primary":e.favorited,"btn-outline-primary":!e.favorited}),onClick:this.setFavorite,disabled:a.has("setFavorite")},n.a.createElement("i",{className:"ion-heart"})," ",e.favorited?"Unfavorite Article":"Favorite Article","(",e.favoritesCount,")")))}render(){const{article:e,article:{comments:t},currentUser:a,form:r,deleteComment:l}=this.props.controller;return n.a.createElement("div",{className:"article-page"},n.a.createElement("div",{className:"banner"},n.a.createElement("div",{className:"container"},n.a.createElement("h1",null,e.title),this.renderArticleMeta())),n.a.createElement("div",{className:"container page"},n.a.createElement("div",{className:"row article-content"},n.a.createElement("div",{className:"col-md-12"},n.a.createElement("div",{dangerouslySetInnerHTML:{__html:m.markdown.toHTML(e.body)}}),n.a.createElement(h.a,{article:e}))),n.a.createElement("hr",null),n.a.createElement("div",{className:"article-actions"},this.renderArticleMeta()),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-xs-12 col-md-8 offset-md-2"},n.a.createElement("form",{className:"card comment-form",onSubmit:this.onSubmit},n.a.createElement("div",{className:"card-block"},n.a.createElement(c.a,b({type:"textarea",inputClassName:"form-control",placeholder:"Write a comment...",inputProps:{rows:"3"}},r))),n.a.createElement("div",{className:"card-footer"},n.a.createElement("img",{src:a.image,className:"comment-author-img"}),n.a.createElement("button",{className:"btn btn-sm btn-primary"},"Post Comment"))),t&&!!t.length&&t.map((e,t)=>n.a.createElement("div",{key:t,className:"card"},n.a.createElement("div",{className:"card-block"},n.a.createElement("p",{className:"card-text"},e.body)),n.a.createElement("div",{className:"card-footer"},n.a.createElement(s.a,{to:"/@"+encodeURIComponent(e.author.username),className:"comment-author"},n.a.createElement("img",{src:e.author.image,className:"comment-author-img"})),"  ",n.a.createElement(s.a,{to:"/@"+encodeURIComponent(e.author.username),className:"comment-author"},e.author.username),n.a.createElement("span",{className:"date-posted"},Object(p.a)(e.createdAt)),e.author.username===a.username&&n.a.createElement("span",{className:"mod-options"},n.a.createElement("i",{className:"ion-trash-a",onClick:l.bind(null,e.id)})))))))))}}E.propTypes={controller:o.a.object.isRequired}},55:function(e,t,a){"use strict";a.r(t);var r=a(22),n=a(43),l=a(25),o=a(2),s=a(26),c=a(10),m=a(11),i=a(32);t.default=Object(r.a)((function(){const e={article:null,currentUser:o.b,form:null,onEnter:()=>{const a=c.a.params.get("slug"),r=e.getArticle(a);return r.then(()=>{e.getComments(a)}),r.then(t,()=>(c.a.transitionTo("/"),!1))}},t=()=>{e.form=new n.a({actions:{submit:()=>{e.postComment(e.form.getResult())}}})};return e.getArticle=t=>l.c({slug:t}).then(({article:t})=>{e.article=new s.a(t)}),e.getComments=t=>l.d({slug:t}).then(({comments:t})=>{e.article.setComments(t)}),e.deleteArticle=()=>l.a({slug:e.article.slug}).then(()=>{c.a.transitionTo("/")}),e.setFollowing=()=>m.a.setFollowing(e.article.author),e.setFavorite=()=>i.a.setFavorite(e.article),e.postComment=t=>o.b.isAuthenticated?l.j({slug:e.article.slug,comment:t}).then(({comment:t})=>{e.article.addComment(t),e.form.clear()}):c.a.transitionTo("/register"),e.deleteComment=t=>l.b({slug:e.article.slug,commentId:t}).then(()=>{e.article.deleteComment(t)}),e}))}}]);
//# sourceMappingURL=article.bundle-ebc5b1024b53b056da40.js.map