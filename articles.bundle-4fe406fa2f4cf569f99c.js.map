{"version":3,"file":"articles.bundle-4fe406fa2f4cf569f99c.js","mappings":"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","sources":["webpack:///./src/js/components/article-preview.js","webpack:///./src/js/components/pagination.js","webpack:///./src/js/pages/profile/articles/articles-controller.js","webpack:///./src/js/pages/profile/articles/articles.js","webpack:///./node_modules/classnames/index.js"],"sourcesContent":["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {Link} from 'crizmas-router';\nimport classNames from 'classnames';\n\nimport ArticleAuthor from './article-author';\nimport TagList from './tag-list';\n\nexport default class ArticlePreview extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n      isFavoritePending: false\n    };\n\n    this.setFavorite = () => {\n      this.setState({isFavoritePending: true});\n      this.props.articleController.setFavorite(this.props.article).then(() => {\n        this.setState({isFavoritePending: false});\n      });\n    };\n  }\n\n  render() {\n    const {article} = this.props;\n\n    return <div className=\"article-preview\">\n      <div className=\"article-meta\">\n        <ArticleAuthor article={article} />\n        <button\n          className={classNames('btn btn-sm pull-xs-right', {\n            'btn-primary': article.favorited,\n            'btn-outline-primary': !article.favorited\n          })}\n          onClick={this.setFavorite}\n          disabled={this.state.isFavoritePending}>\n          <i className=\"ion-heart\"></i> {article.favoritesCount}\n        </button>\n      </div>\n      <Link to={`/article/${article.slug}`} className=\"preview-link\">\n        <h1>{article.title}</h1>\n        <p>{article.description}</p>\n        <span>Read more...</span>\n        <TagList article={article} />\n      </Link>\n    </div>;\n  }\n}\n\nArticlePreview.propTypes = {\n  article: PropTypes.object.isRequired,\n  articleController: PropTypes.object.isRequired\n};\n","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nexport default class Pagination extends Component {\n  onPageClick(pageIndex, e) {\n    e.preventDefault();\n    this.props.onChange({offset: pageIndex * this.props.itemsPerPage});\n  }\n\n  render() {\n    const {totalItemsCount, offset, itemsPerPage} = this.props;\n    const pagesCount = Math.ceil(totalItemsCount / itemsPerPage);\n\n    if (pagesCount <= 1) {\n      return false;\n    }\n\n    const currentPageIndex = Math.trunc(offset / itemsPerPage);\n\n    return <nav>\n      <ul className=\"pagination\">\n        {Array.from({length: pagesCount}, (item, i) => <li\n          key={i}\n          className={classNames('page-item', {active: i === currentPageIndex})}>\n          <a\n            href=\"\"\n            className=\"page-link\"\n            onClick={this.onPageClick.bind(this, i)}>{i + 1}</a>\n        </li>)}\n      </ul>\n    </nav>;\n  }\n}\n\nPagination.propTypes = {\n  totalItemsCount: PropTypes.number.isRequired,\n  offset: PropTypes.number.isRequired,\n  itemsPerPage: PropTypes.number.isRequired,\n  onChange: PropTypes.func.isRequired\n};\n","import {controller} from 'crizmas-mvc';\n\nimport * as articleApi from '../../../api/article';\nimport {Article} from '../../../models/article';\nimport articleController from '../../../controllers/article';\n\nconst tabs = {\n  own: Symbol(),\n  favorite: Symbol()\n};\n\nexport default controller(function ArticlesController() {\n  const ctrl = {\n    username: null,\n    articlesOffset: 0,\n    articlesLimit: 5,\n    totalArticlesCount: 0,\n    tabs,\n    selectedTab: tabs.own,\n    articles: null,\n    articleController\n  };\n\n  ctrl.onEnter = ({routeFragment}) => {\n    ctrl.username = routeFragment.parent.controllerObject.username;\n    ctrl.selectedTab = routeFragment.abstractPath === 'favorites'\n      ? tabs.favorite\n      : tabs.own;\n\n    ctrl.getArticles();\n  };\n\n  ctrl.getArticles = () => {\n    const getArticlesFunc = ctrl.selectedTab === tabs.own\n      ? getOwnArticles\n      : getFavoriteArticles;\n\n    return getArticlesFunc().then(({articles, articlesCount}) => {\n      ctrl.articles = articles.map((articleData) => new Article(articleData));\n      ctrl.totalArticlesCount = articlesCount;\n    });\n  };\n\n  const getOwnArticles = () => {\n    return articleApi.getOwnArticles({\n      author: ctrl.username,\n      offset: ctrl.articlesOffset,\n      limit: ctrl.articlesLimit\n    });\n  };\n\n  const getFavoriteArticles = () => {\n    return articleApi.getFavoriteArticles({\n      favorited: ctrl.username,\n      offset: ctrl.articlesOffset,\n      limit: ctrl.articlesLimit\n    });\n  };\n\n  ctrl.getPageArticles = ({offset}) => {\n    ctrl.articlesOffset = offset;\n\n    ctrl.getArticles();\n  };\n\n  return ctrl;\n});\n","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {Link} from 'crizmas-router';\nimport classNames from 'classnames';\n\nimport ArticlePreview from '../../../components/article-preview';\nimport Pagination from '../../../components/pagination';\n\nexport default class Articles extends Component {\n  constructor() {\n    super();\n\n    this.setFollowing = () => {\n      this.props.controller.setFollowing();\n    };\n  }\n\n  render() {\n    const {username, selectedTab, tabs, articles, pending, articleController,\n      articlesOffset, articlesLimit, totalArticlesCount, getPageArticles} = this.props.controller;\n\n    return <div className=\"container\">\n      <div className=\"row\">\n        <div className=\"col-xs-12 col-md-10 offset-md-1\">\n          <div className=\"articles-toggle\">\n            <ul className=\"nav nav-pills outline-active\">\n              <li className=\"nav-item\">\n                <Link\n                  className={classNames('nav-link', {active: selectedTab === tabs.own})}\n                  to={`/@${encodeURIComponent(username)}`}>My Articles</Link>\n              </li>\n              <li className=\"nav-item\">\n                <Link\n                  className={classNames('nav-link', {active: selectedTab === tabs.favorite})}\n                  to={`/@${encodeURIComponent(username)}/favorites`}>\n                  Favorited Articles\n                </Link>\n              </li>\n            </ul>\n          </div>\n\n          {articles && (articles.length\n            ? articles.map((article, i) => <ArticlePreview\n              key={i}\n              article={article}\n              articleController={articleController} />)\n            : <div className=\"article-preview\">No articles are here... yet.</div>)}\n\n          {pending.has('getArticles') && <div className=\"article-preview\">Loading articles...</div>}\n\n          <Pagination\n            totalItemsCount={totalArticlesCount}\n            offset={articlesOffset}\n            itemsPerPage={articlesLimit}\n            onChange={getPageArticles} />\n        </div>\n      </div>\n    </div>;\n  }\n}\n\nArticles.propTypes = {\n  controller: PropTypes.object.isRequired\n};\n","/*!\n  Copyright (c) 2018 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString === Object.prototype.toString) {\n\t\t\t\t\tfor (var key in arg) {\n\t\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n"],"names":["ArticlePreview","Component","constructor","super","this","state","isFavoritePending","setFavorite","setState","props","articleController","article","then","render","className","classNames","favorited","onClick","disabled","favoritesCount","to","slug","title","description","propTypes","PropTypes","Pagination","onPageClick","pageIndex","e","preventDefault","onChange","offset","itemsPerPage","totalItemsCount","pagesCount","Math","ceil","currentPageIndex","trunc","Array","from","length","item","i","key","active","href","bind","tabs","own","Symbol","favorite","controller","ctrl","username","articlesOffset","articlesLimit","totalArticlesCount","selectedTab","articles","routeFragment","parent","controllerObject","abstractPath","getArticles","getOwnArticles","getFavoriteArticles","articlesCount","map","articleData","Article","articleApi","author","limit","getPageArticles","Articles","setFollowing","pending","encodeURIComponent","has","hasOwn","hasOwnProperty","classes","arguments","arg","argType","push","isArray","inner","apply","toString","Object","prototype","call","join","module","exports","default"],"sourceRoot":""}