"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[942],{91:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var r=a(395),n=a(386),l=a(879),s=a(759),o=a(707),c=a(96),m=a(946),i=a(238);const u=(0,r.Ih)((function(){const e={article:null,currentUser:s.a,form:null,onEnter:()=>{const a=c.Z.params.get("slug"),r=e.getArticle(a);return r.then((()=>{e.getComments(a)})),r.then(t,(()=>(c.Z.transitionTo("/"),!1)))}},t=()=>{e.form=new n.Z({actions:{submit:()=>{e.postComment(e.form.getResult())}}})};return e.getArticle=t=>l.fq({slug:t}).then((({article:t})=>{e.article=new o.d(t)})),e.getComments=t=>l.lk({slug:t}).then((({comments:t})=>{e.article.setComments(t)})),e.deleteArticle=()=>l.jX({slug:e.article.slug}).then((()=>{c.Z.transitionTo("/")})),e.setFollowing=()=>m.ZP.setFollowing(e.article.author),e.setFavorite=()=>i.Z.setFavorite(e.article),e.postComment=t=>s.a.isAuthenticated?l.w({slug:e.article.slug,comment:t}).then((({comment:t})=>{e.article.addComment(t),e.form.clear()})):c.Z.transitionTo("/register"),e.deleteComment=t=>l.YF({slug:e.article.slug,commentId:t}).then((()=>{e.article.deleteComment(t)})),e}))},727:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var r=a(408),n=a(294),l=a(697),s=a.n(l),o=a(437),c=a(898),m=a(84),i=a.n(m),u=a(184),d=a.n(u),h=a(255),p=a(621),E=a(139);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}class g extends r.Component{constructor(){super(),this.onDelete=()=>{this.props.controller.deleteArticle()},this.setFollowing=()=>{this.props.controller.setFollowing()},this.setFavorite=()=>{this.props.controller.setFavorite()},this.onSubmit=e=>{e.preventDefault(),this.props.controller.form.submit()}}renderArticleMeta(){const{article:e,currentUser:t,pending:a}=this.props.controller;return n.createElement("div",{className:"article-meta"},n.createElement(h.Z,{article:e}),e.author.username===t.username&&n.createElement("span",null,n.createElement(o.r,{to:`/editor/${e.slug}`,className:"btn btn-sm btn-outline-secondary"},n.createElement("i",{className:"ion-edit"}),"  Edit Article")," ",n.createElement("button",{className:"btn btn-sm btn-outline-danger",onClick:this.onDelete,disabled:a.has("deleteArticle")},n.createElement("i",{className:"ion-trash-a"}),"  Delete Article")),e.author.username!==t.username&&n.createElement("span",null,n.createElement("button",{className:d()("btn btn-sm",{"btn-secondary":e.author.following,"btn-outline-secondary":!e.author.following}),onClick:this.setFollowing,disabled:a.has("setFollowing")},n.createElement("i",{className:"ion-plus-round"})," ",e.author.following?"Unfollow":"Follow"," ",e.author.username)," ",n.createElement("button",{className:d()("btn btn-sm",{"btn-primary":e.favorited,"btn-outline-primary":!e.favorited}),onClick:this.setFavorite,disabled:a.has("setFavorite")},n.createElement("i",{className:"ion-heart"})," ",e.favorited?"Unfavorite Article":"Favorite Article","(",e.favoritesCount,")")))}render(){const{article:e,article:{comments:t},currentUser:a,form:r,deleteComment:l}=this.props.controller;return n.createElement("div",{className:"article-page"},n.createElement("div",{className:"banner"},n.createElement("div",{className:"container"},n.createElement("h1",null,e.title),this.renderArticleMeta())),n.createElement("div",{className:"container page"},n.createElement("div",{className:"row article-content"},n.createElement("div",{className:"col-md-12"},n.createElement("div",{dangerouslySetInnerHTML:{__html:i()(e.body)}}),n.createElement(p.Z,{article:e}))),n.createElement("hr",null),n.createElement("div",{className:"article-actions"},this.renderArticleMeta()),n.createElement("div",{className:"row"},n.createElement("div",{className:"col-xs-12 col-md-8 offset-md-2"},n.createElement("form",{className:"card comment-form",onSubmit:this.onSubmit},n.createElement("div",{className:"card-block"},n.createElement(c.Z,b({type:"textarea",inputClassName:"form-control",placeholder:"Write a comment...",inputProps:{rows:"3"}},r))),n.createElement("div",{className:"card-footer"},n.createElement("img",{src:a.image,className:"comment-author-img"}),n.createElement("button",{className:"btn btn-sm btn-primary"},"Post Comment"))),t&&!!t.length&&t.map(((e,t)=>n.createElement("div",{key:t,className:"card"},n.createElement("div",{className:"card-block"},n.createElement("p",{className:"card-text"},e.body)),n.createElement("div",{className:"card-footer"},n.createElement(o.r,{to:`/@${encodeURIComponent(e.author.username)}`,className:"comment-author"},n.createElement("img",{src:e.author.image,className:"comment-author-img"})),"  ",n.createElement(o.r,{to:`/@${encodeURIComponent(e.author.username)}`,className:"comment-author"},e.author.username),n.createElement("span",{className:"date-posted"},(0,E.R)(e.createdAt)),e.author.username===a.username&&n.createElement("span",{className:"mod-options"},n.createElement("i",{className:"ion-trash-a",onClick:l.bind(null,e.id)}))))))))))}}g.propTypes={controller:s().object.isRequired}}}]);
//# sourceMappingURL=article.bundle-58d940967762726e3054.js.map